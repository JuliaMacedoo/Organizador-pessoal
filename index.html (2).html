<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Contagem Regressiva</title>

<style>
:root{
  --bg:#f3f0f7;
  --card:#ffffff;
  --text:#2d2d2d;
  --accent:#a29bfe;
}

body.dark{
  --bg:#1a1a2e;
  --card:#25253a;
  --text:#e0e0e0;
}

body{
  margin:0;
  font-family:Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
  padding:20px;
}

h1{
  text-align:center;
}

.top{
  display:flex;
  justify-content:center;
  gap:15px;
  margin-bottom:20px;
}

button{
  padding:8px 15px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  background:var(--accent);
  color:white;
}

.grid{
  display:grid;
  gap:20px;
  grid-template-columns:repeat(auto-fill,minmax(250px,1fr));
}

.card{
  background:var(--card);
  padding:20px;
  border-radius:15px;
}

.count{
  font-weight:bold;
  margin-top:10px;
}
</style>
</head>

<body>

<h1>Cada dia mais perto do que importa.</h1>

<div class="top">
  <button id="newBtn">+ Novo Evento</button>
  <button id="themeBtn">ðŸŒ—</button>
</div>

<div class="grid" id="grid"></div>

<script>
let events = JSON.parse(localStorage.getItem("events")) || [];

const grid = document.getElementById("grid");
const newBtn = document.getElementById("newBtn");
const themeBtn = document.getElementById("themeBtn");

newBtn.addEventListener("click", addEvent);
themeBtn.addEventListener("click", toggleTheme);

function toggleTheme(){
  document.body.classList.toggle("dark");
}

function addEvent(){
  const title = prompt("Nome do evento:");
  const date = prompt("Data (YYYY-MM-DD HH:MM):");
  if(!title || !date) return;

  events.push({
    id: Date.now(),
    title,
    date
  });

  save();
  render();
}

function deleteEvent(id){
  events = events.filter(e => e.id !== id);
  save();
  render();
}

function save(){
  localStorage.setItem("events", JSON.stringify(events));
}

function render(){
  grid.innerHTML = "";

  events.forEach(event=>{
    const div = document.createElement("div");
    div.className = "card";

    div.innerHTML = `
      <h3>${event.title}</h3>
      <div>${event.date}</div>
      <div class="count" id="c-${event.id}"></div>
      <button onclick="deleteEvent(${event.id})">Excluir</button>
    `;

    grid.appendChild(div);
  });
}

function updateCountdown(){
  events.forEach(event=>{
    const el = document.getElementById("c-"+event.id);
    if(!el) return;

    const diff = new Date(event.date) - new Date();

    if(diff <= 0){
      el.innerHTML = "ConcluÃ­do ðŸŽ‰";
      return;
    }

    const days = Math.floor(diff/(1000*60*60*24));
    const hours = Math.floor(diff/(1000*60*60)%24);
    const minutes = Math.floor(diff/(1000*60)%60);
    const seconds = Math.floor(diff/1000%60);

    el.innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
  });
}

setInterval(updateCountdown,1000);

render();
</script>

</body>
</html>
